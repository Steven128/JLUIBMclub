<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>个人信息-吉大IBM俱乐部</title>
    <script type="text/javascript" src="../js/jQuery/jquery-1.11.3.min.js"></script>
    <link type="text/css" rel="stylesheet" href="../css/bootstrap.css" />
    <link type="text/css" rel="stylesheet" href="../css/Normalize.css" />
    <link type="text/css" rel="stylesheet" href="../css/page.css" />
    <link type="text/css" rel="stylesheet" href="../css/user.css" />
    <link rel="stylesheet" href="../animsition/dist/css/animsition.min.css">
    <link rel="stylesheet" href="css/style.css">

    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/page.js"></script>
    <script type="text/javascript" src="../js/user.js"></script>
    <script type="text/javascript" src="../js/xcConfirm.js"></script>
</head>

<body>
    <div class="container animsition">
        <div class="head-content">
            <div class="site-branding">
                <div class="site-title">
                    <a class="animsition-link" data-animsition-out="fade-out-left-sm" href="../" rel="home">吉林大学IBM俱乐部</a>
                    <div class="menu-button">
                        <img src="../src/icon/menu.png" width="30px" height="30px" />
                    </div>
                </div>
            </div>
            <!-- menu on larger devices -->
            <nav id="nav" class="main-navigation hidden-xs hidden-sm" role="navigation">
                <ul id="primary-menu" class="menu">
                    <li class="menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" href="../">首页</a></li>
                    <li class="menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" href="../activities/">活动介绍</a></li>
                    <li class="menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" href="../score/">成绩查询</a></li>
                    <li id="wiki-item" class="menu-item">
                        <div style="display: inline">科普之窗&nbsp;&nbsp;<img style="display: inline;width: 1em;height: 1em;" src="../src/icon/down-white.png" /></div>
                    </li>
                    <li class="menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" href="../lanqiaobei/">蓝桥杯</a></li>
                    <li class="menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" href="../joinus/">加入我们</a></li>
                    <ul class="sub-menu">
                        <li id="sub-menu-wrap" class="sub-menu-item"></li>
                        <li class="sub-menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/C语言/">C语言</a></li>
                        <li class="sub-menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/C++/">C++</a></li>
                        <li class="sub-menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/算法/">算法</a></li>
                        <li id="web-item" class="sub-menu-item">Web开发&nbsp;&nbsp;<span class="web_rightIcon"><img style="display: inline;width: 1em;height: 1em;" src="../src/icon/right-white.png" /></span><span class="web_downIcon"><img style="display: inline;width: 1em;height: 1em;" src="../src/icon/down-white.png" /></span></li>
                        <li class="sub-menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/Linux/">Linux</a></li>
                        <li class="sub-menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/Java/">Java</a></li>
                    </ul>
                    <ul class="sub-menu-web">
                        <li id="web-1" class="sub-menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/Web前端/">Web前端</a></li>
                        <li id="web-2" class="sub-menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/Python/">Python</a></li>
                        <li id="web-3" class="sub-menu-item"><a class="animsition-link" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/PHP/">PHP</a></li>
                    </ul>
                </ul>
            </nav>

            <!-- menu on mobile devices -->
            <nav id="nav" class="main-navigation-mobile col-xs-12" role="navigation">
                <ul id="primary-menu" class="menu col-xs-12">
                    <li class="menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" href="../">首页</a></li>
                    <li class="menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" href="../activities/">活动介绍</a></li>
                    <li class="menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" href="../score/">成绩查询</a></li>
                    <li id="wiki-item-mobile" class="menu-item col-xs-12">
                        <div class="col-xs-12" style="display: inline;padding: 0;">科普之窗&nbsp;&nbsp;<img style="display: inline;width: 1em;height: 1em;" src="../src/icon/down-white.png" /></div>
                    </li>
                    <ul class="sub-menu sub-menu-mobile col-xs-12">
                        <li id="sub-menu-wrap col-xs-12"></li>
                        <li class="sub-menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/C语言/">C语言</a></li>
                        <li class="sub-menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/C++/">C++</a></li>
                        <li class="sub-menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/算法/">算法</a></li>
                        <li id="web-item-mobile" class="sub-menu-item col-xs-12">Web开发&nbsp;&nbsp;<span class="web_rightIcon"><img style="display: inline;width: 1em;height: 1em;" src="../src/icon/right-white.png" /></span><span class="web_downIcon"><img style="display: inline;width: 1em;height: 1em;" src="../src/icon/down-white.png" /></span></li>
                        <ul class="sub-menu-web sub-menu-web-mobile col-xs-12">
                            <li class="sub-menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/Web前端/">Web前端</a></li>
                            <li class="sub-menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/Python/">Python</a></li>
                            <li class="sub-menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/PHP/">PHP</a></li>
                        </ul>
                        <li class="sub-menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/Linux/">Linux</a></li>
                        <li class="sub-menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" target="_blank" href="../wiki/Java/">Java</a></li>
                    </ul>
                    <li class="menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" href="../lanqiaobei/">蓝桥杯</a></li>
                    <li class="menu-item col-xs-12"><a class="animsition-link col-xs-12" data-animsition-out="fade-out-left-sm" href="../joinus/">加入我们</a></li>

                </ul>
            </nav>
            <!-- #site-navigation -->

        </div>

        <div class="main-content">
            <div class="bar-box">
                <div class="left-bar">
                    <ul>
                        <li id="index-item" class="bar-item">
                            <h4><span class="item-text">个人主页</span></h4>
                        </li>
                        <li class="bar-item user-item"><img class="icon" src="../src/icon/user.png" /><span class="item-text">基本信息</span></li>
                        <li class="bar-item pic-item"><img class="icon" src="../src/icon/upload.png" /><span class="item-text">更换头像</span></li>
                        <li class="bar-item passwd-item"><img class="icon" src="../src/icon/input.png" /><span class="item-text">修改密码</span></li>
                        <li class="bar-item update-item"><img class="icon" src="../src/icon/settings.png" /><span class="item-text">修改联系方式</span></li>
                        <li class='bar-item manager-item'><img class="icon" src="../src/icon/admin.png" /><span class="item-text">社员管理</span></li>
                        <li id="logout-sm" class="logout bar-item"><img class="icon" src="../src/icon/quit.png" /><span class="item-text">退出登录</span></li>
                    </ul>
                </div>
                <div class="top-nav">
                    <table class="top-nav-box">
                        <thead>
                            <tr>
                                <th>
                                    <h4 class="bar-item bar-item-4 user-item"><span><img class="icon" src="../src/icon/user.png" /></span>
                                        <div class="item-text">基本信息</div>
                                    </h4>
                                </th>
                                <th>
                                    <h4 class="bar-item bar-item-4 pic-item"><span><img class="icon" src="../src/icon/upload.png" /></span>
                                        <div class="item-text">更换头像</div>
                                    </h4>
                                </th>
                                <th>
                                    <h4 class="bar-item bar-item-4 passwd-item"><span><img class="icon" src="../src/icon/input.png" /></span>
                                        <div class="item-text">修改密码</div>
                                    </h4>
                                </th>
                                <th>
                                    <h4 class="bar-item bar-item-6 update-item"><span><img class="icon" src="../src/icon/settings.png" /></span>
                                        <div class="item-text">修改联系方式</div>
                                    </h4>
                                </th>
                                <th>
                                    <h4 class='bar-item bar-item-4 manager-item'><span><img class="icon" src="../src/icon/admin.png" /></span>
                                        <div class="item-text">社员管理</div>
                                    </h4>
                                </th>

                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="main-bar row">
                    <div class="user-box box col-xs-12">
                        <div class="user-main-head col-xs-12">
                            <div class="userPic-box">
                                <img class="userPic" />
                            </div>
                        </div>
                        <div class="user-main col-xs-12 col-md-6">

                            <div class="user-text">

                            </div>
                            <div class="user-group">

                            </div>
                        </div>
                        <div class="user-activities col-xs-12 col-md-6">

                        </div>

                    </div>
                    <div class="pic-box box col-xs-12">
                        <h3 class="title col-xs-12">更换头像</h3>
                        <div class="pic-text text col-xs-12 col-sm-8 col-md-6">
                            <form id="pic-form" method="post" action="">

                                <div class="picArea">
                                    <button class="button">选择图片<input type="file" id="file" accept="image/*" /></button>
                                    <div class="wrap">
                                        <img id="previewResult" />
                                    </div>
                                </div>
                                <div class="btn-area">
                                    <button id="uploadPic" type="button" class="submit">确认修改</button>
                                </div>
                            </form>
                        </div>

                    </div>
                    <div class="passwd-box box col-xs-12">
                        <h3 class="title col-xs-12">修改密码</h3>
                        <div class="passwd-text text col-xs-12 col-sm-8 col-md-6">
                            <form id="update-password" method="post" action="">
                                <div class="section password">
                                    <div class="section__title">旧密码</div>
                                    <div class="form-group">
                                        <input id="oldPassword" type="password" class="input-text form-control" name="oldPassword" placeholder="请输入旧密码" />
                                    </div>
                                </div>
                                <div class="section password">
                                    <div class="section__title">新密码</div>
                                    <div class="form-group">
                                        <input id="newPassword" type="password" class="input-text form-control" name="newPassword" placeholder="请输入新密码" />
                                    </div>
                                </div>
                                <div class="section password">
                                    <div class="section__title">确认密码</div>
                                    <div class="form-group">
                                        <input id="reNewPassword" type="password" class="input-text form-control" name="reNewPassword" placeholder="请重新输入密码" />
                                    </div>
                                </div>
                                <div class="btn-area">
                                    <button id="password-update" type="submit" class="submit">确认修改</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="update-box box col-xs-12">
                        <h3 class="title col-xs-12">修改联系方式</h3>
                        <div class="update-text text col-xs-12 col-sm-8 col-md-6">
                            <form id="update-form" method="post" action="">


                            </form>
                        </div>
                    </div>
                </div>
                <div class="wrap-bar"></div>
            </div>
        </div>
        <div class="foot-content">
            <div class="copyright">
                <div class="copyright-text">&copy;&nbsp;2018&nbsp;JLUIBMclub&nbsp;&nbsp;<a href="../">返回主页</a><a href="../">联系我们</a></div>
            </div>
        </div>

        <div class="app" id="uploadPage">
            <div class="bar"><a class="back pull-left" id="closeCrop">取消</a><a id="getFile" class="pull-right">使用</a></div>
            <div class="main">
                <canvas class="upload-mask">
        
                </canvas>
                <div class="preview-box">
                    <img id="preview" />
                </div>
                <canvas class="photo-canvas">
        
                </canvas>
                <a id="rotateBtn">
                    <i class="fa fa-rotate-right  fa-3x"></i>
                    <div>旋转照片</div>
                </a>
            </div>
        </div>
    </div>
    <img id="back_to_top" src="../src/icon/back_to_top.png" />
    <script type="text/javascript" src="../js/md5.js"></script>
    <script type="text/javascript" src="../js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="../js/user-update.js"></script>
    <!-- animsition js -->
    <script src="../animsition/dist/js/jquery.animsition.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {

            $(".animsition").animsition({

                inClass: 'fade-in',
                outClass: 'fade-out',
                inDuration: 500,
                outDuration: 400,
                linkElement: '.animsition-link',
                // e.g. linkElement   :   'a:not([target="_blank"]):not([href^=#])'
                loading: true,
                loadingParentElement: 'body', //animsition wrapper element
                loadingClass: 'animsition-loading',
                unSupportCss: ['animation-duration',
                    '-webkit-animation-duration',
                    '-o-animation-duration'
                ],
                //"unSupportCss" option allows you to disable the "animsition" in case the css property in the array is not supported by your browser.
                //The default setting is to disable the "animsition" in a browser that does not support "animation-duration".
                overlay: false,
                overlayClass: 'animsition-overlay-slide',
                overlayParentElement: 'body'
            });
        });
    </script>

</body>
<script src="js/require.js"></script>
<script src="js/main.js"></script>
<script>
    var myCrop;
    require(["jquery", 'hammer', 'tomPlugin', "tomLib", 'hammer.fake', 'hammer.showtouch'], function($, hammer, plugin, T) {
        document.addEventListener("touchmove", function(e) {})
            //初始化图片大小128*128
        var opts = {
                cropWidth: 256,
                cropHeight: 256
            },
            $file = $("#file"),
            previewStyle = {
                x: 0,
                y: 0,
                scale: 1,
                rotate: 0,
                ratio: 1
            },
            transform = T.prefixStyle("transform"),
            $previewResult = $("#previewResult"),
            $previewBox = $(".preview-box"),
            $rotateBtn = $("#rotateBtn"),
            $getFile = $("#getFile"),
            $preview = $("#preview"),
            $uploadPage = $("#uploadPage"),
            $mask = $(".upload-mask"),
            maskCtx = $mask[0].getContext("2d");

        //这是插件调用主体
        myCrop = T.cropImage({
            bindFile: $file,
            enableRatio: false, //是否启用高清,高清得到的图片会比较大
            canvas: $(".photo-canvas")[0], //放一个canvas对象
            cropWidth: opts.cropWidth, //剪切大小
            cropHeight: opts.cropHeight,
            bindPreview: $preview, //绑定一个预览的img标签
            useHammer: true, //是否使用hammer手势，否的话将不支持缩放
            oninit: function() {

            },
            onLoad: function(data) {
                //用户每次选择图片后执行回调
                resetUserOpts();
                previewStyle.ratio = data.ratio;
                $preview.attr("src", data.originSrc).css({
                    width: data.width,
                    height: data.height
                }).css(transform, 'scale(' + 1 / previewStyle.ratio + ')');
                myCrop.setCropStyle(previewStyle)
            }
        });

        function resetUserOpts() {
            $(".photo-canvas").hammer('reset');
            previewStyle = {
                scale: 1,
                x: 0,
                y: 0,
                rotate: 0
            };
            $previewResult.attr("src", '');
            $preview.attr("src", '')
        }
        $(".photo-canvas").hammer({
                gestureCb: function(o) {
                    //每次缩放拖拽的回调
                    $.extend(previewStyle, o);
                    $preview.css(transform, "translate3d(" + previewStyle.x + 'px,' + previewStyle.y + "px,0) rotate(" + previewStyle.rotate + "deg) scale(" + (previewStyle.scale / previewStyle.ratio) + ")")
                }
            })
            //选择图片
        $rotateBtn.on("click", function() {
                if (previewStyle.rotate == 360) {
                    previewStyle.rotate = 0;
                } else {
                    previewStyle.rotate += 90;
                }
                myCrop.setCropStyle(previewStyle)
                $preview.css(transform, "translate3d(" + previewStyle.x + 'px,' + previewStyle.y + "px,0) rotate(" + previewStyle.rotate + "deg) scale(" + (previewStyle.scale / previewStyle.ratio) + ")")
            })
            //获取图片并关闭弹窗返回到表单界面
        $getFile.on("click", function() {
                var src;
                $uploadPage.hide();
                myCrop.setCropStyle(previewStyle)
                    //自定义getCropFile({type:"png",background:"red",lowDpi:true})
                src = myCrop.getCropFile({});
                $previewResult.attr("src", src)
                    //you can upload new img file :cheers:)
            })
            //上传文件按钮&&关闭弹窗按钮
        $(document).delegate("#file", "click", function() {
            $uploadPage.show();
        }).delegate("#closeCrop", "click", function() {
            $uploadPage.hide();
            resetUserOpts();
            myCrop.setCropStyle(previewStyle)
        })
        $file.one("click", function() {
            $uploadPage.show();
            $mask.prop({
                width: $mask.width(),
                height: $mask.height()
            })
            maskCtx.fillStyle = "rgba(0,0,0,0.7)";
            maskCtx.fillRect(0, 0, $mask.width(), $mask.height());
            maskCtx.fill();
            maskCtx.clearRect(($mask.width() - opts.cropWidth) / 2, ($mask.height() - opts.cropHeight) / 2, opts.cropWidth, opts.cropHeight)
        })
    })
</script>

</html>